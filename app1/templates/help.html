{% extends 'Home.html' %}
{% block title %}
Pet Care
{% endblock title %}

{% block style %}
<title>Contact</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css">

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<style>
    .contact {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        padding: 20px;
        box-sizing: border-box;
    }

    .image {
        max-width: 50rem;
        flex: 1;
        padding: 5px;
    }

    form {
        max-width: 450px;
        padding: 20px;
        flex: 1;
        border: 5px solid #e67e22;
        border-radius: 10px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .btn {
        width: 100%;
        background-color: #e67e22;
        color: #fff;
        padding: 10px;
    }

    label, input, textarea {
        font-weight: bold;
    }

    @media (max-width: 768px) {
        .contact {
            flex-direction: column;
        }
    }

    ::placeholder {
        text-align: center;
        font-size: 16px;
        color: #555;
        font-weight: bold;
    }

    h3.form-heading {
        text-align: center;
    }
    section {
        display: flex;
        width: 100%;
        height: 100%;
        align-items: center;
        justify-content: center;
        background-image: url('your-background-image.jpg');
        background-size: cover;
        color: #333;
        padding: 20px;
        box-sizing: border-box;
    }
    section .div {
        border: 5px solid #e67e22;
        width: 100%;
        max-width: 400px;
        height: auto;
        padding: 30px;
        border-radius: 10px;
        background-color: #fff;
        margin: 0 auto; 
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
    }
    form {
        text-align: center;
    }
    label {
        display: block;
        font-weight: bold;
        margin-top: 15px;
        text-align: left;
    }
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="date"] {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 3px;
    }
    .button {
        margin-top: 20px;
        width: 100%;
        padding: 15px;
        background-color: #e67e22;
        color: #fff;
        font-size: 16px;
        border: none;
        cursor: pointer;
        border-radius: 20px;
    }
    h2 {
        margin-top: 10px;
        color: #333;
        text-align: center;
    }
    textarea {
        width: 100%;
        max-width: 100%;
        resize: vertical;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
        font-size: 16px;
    }

    textarea:focus, textarea:hover {
        border: 1px solid #007BFF;
    }
    .image img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 0 auto;
    }
    .chat-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background-color: #fff;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        width: 100%;
        max-width: 600px;
        padding: 20px;
        transition: transform 0.3s ease-in-out;
        margin: 20px;
        max-width: 450px;
        padding: 20px;
        flex: 1;
        border: 5px solid #e67e22;
        border-radius: 10px;
    }
    .chat-header {
        font-size: 1.5em;
        margin-bottom: 10px;
        color: #333;
        text-align: center;
    }
    .chat-box {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 10px;
        height: 300px;
        overflow-y: auto;
        background-color: #f9f9f9;
        width: 100%;
    }
    .chat-box p {
        margin: 5px 0;
    }
    .user-message {
        text-align: right;
        color: #555;
    }
    .bot-message {
        text-align: left;
        color: #e67e22;
    }
    .chat-input-container {
        display: flex;
        margin-top: 10px;
        width: 100%;
    }
    .chat-input {
        flex: 1;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 8px 0 0 8px;
        outline: none;
    }
    .chat-button {
        padding: 10px 20px;
        border: none;
        background-color: #e67e22;
        color: #fff;
        border-radius: 0 8px 8px 0;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    .chat-button:hover {
        background-color: #e67e22;
    }
    .chat-icon {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #e67e22;
        color: #fff;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        transition: background-color 0.3s, transform 0.3s;
    }
    .chat-icon:hover {
        background-color: #e67e22;
        transform: scale(1.1);
    }
    .predefined-questions {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 10px;
    }
    .predefined-question-button {
        flex: 1 1 calc(50% - 10px);
        padding: 10px;
        border: none;
        background-color: #e67e22;
        color: #fff;
        border-radius: 8px;
        cursor: pointer;
        text-align: center;
        transition: background-color 0.3s;
    }
    .predefined-question-button:hover {
        background-color: #e67e22;
    }
    @media (max-width: 500px) {
        .chat-container {
            width: 100%;
        }
        .chat-icon {
            width: 50px;
            height: 50px;
        }
    }
</style>
<script>
    
    function sendMessage() {
        var question = document.getElementById("question").value;
        var chatBox = document.getElementById("chat-box");
        if (question.trim() === "") return;  // Avoid sending empty messages

        // Add user message
        var userMessage = document.createElement("p");
        userMessage.className = "user-message";
        userMessage.innerText = question;
        chatBox.appendChild(userMessage);

        // Fetch response from the server
        fetch(`/get_response/?question=${encodeURIComponent(question)}`)
            .then(response => response.json())
            .then(data => {
                var botMessage = document.createElement("p");
                botMessage.className = "bot-message";
                botMessage.innerText = data.answer;
                chatBox.appendChild(botMessage);
                chatBox.scrollTop = chatBox.scrollHeight;  // Scroll to the bottom
            })
            .catch(error => {
                console.error('Error fetching response:', error);
            });

        document.getElementById("question").value = "";  // Clear input field
    }

    function askPredefinedQuestion(question) {
        document.getElementById("question").value = question;
        sendMessage();
    }

    document.getElementById("question").addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
            sendMessage();
        }
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
{% endblock style %}

{% block body %}
<body>
    <section class="contact" id="contact">
        <div class="chat-container" id="chat-container">
            <div class="chat-box" id="chat-box"></div>
            <div class="chat-input-container">
                <input type="text" id="question" class="chat-input" placeholder="Type your question here...">
                <button class="chat-button" onclick="sendMessage()">Send</button>
            </div>
            <div class="predefined-questions">
                <button class="predefined-question-button" onclick="askPredefinedQuestion('When are doctors available?')">When are doctors available?</button>
                <button class="predefined-question-button" onclick="askPredefinedQuestion('How many doctors are available each day?')">How many doctors are available each day?</button>
                <button class="predefined-question-button" onclick="askPredefinedQuestion('How many tickets do doctors have each day?')">How many tickets do doctors have each day?</button>
                <button class="predefined-question-button" onclick="askPredefinedQuestion('What services do you offer?')">What services do you offer?</button>
                <button class="predefined-question-button" onclick="askPredefinedQuestion('Can I book an appointment?')">Can I book an appointment?</button>
                <button class="predefined-question-button" onclick="askPredefinedQuestion('What is your location?')">What is your location?</button>
                <button class="predefined-question-button" onclick="askPredefinedQuestion('How can I contact support?')">How can I contact support?</button>
            </div>
        </div>
    </section>
    <script>
        document.getElementById('phonenumber').addEventListener('input', function (e) {
            const input = e.target;
            const phoneError = document.getElementById('phone-error');
            const cleanedValue = input.value.replace(/\D/g, ''); // Remove all non-numeric characters

            if (cleanedValue !== input.value) {
                input.value = cleanedValue;
                phoneError.textContent = 'Only numbers are allowed.';
            } else {
                phoneError.textContent = '';
            }
        });
    </script>
</body>
{% endblock body %}
